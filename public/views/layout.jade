!!!
html
	head
		title Orgnz.it
		script(src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js")
		//script(src="../../js/jquery-1.3.2.min.js")
		script(src="../../socket.io/socket.io.js")
		script(src="../../js/layout.js")
		script(src="../../js/orgnzit.js")
		script(src="../../js/socket.js")
		link(rel="stylesheet", type="text/css", href="/css/frontend.css")
	
	body
	
		div#page-body

			table#table
				tr#table-header
					th Col1
					th Col2
					th Col3
					th Col4
				tr.row
					td Val1-1
					td Val1-2
					td Val1-3
					td Val1-4
				tr.row
					td Val2-1
					td Val2-2
					td Val2-3
					td Val2-4
				tr.row
					td Val3-1
					td Val3-2
					td Val3-3
					td Val3-4
				tr.row
					td Val4-1
					td Val4-2
					td Val4-3
					td Val4-4
				tr.row
					td Val5-1
					td Val5-2
					td Val5-3
					td Val5-4
				tr.row
					td Val6-1
					td Val6-2
					td Val6-3
					td Val6-4
				
			div#cols
			div#rows

			a#addRow Row++
			a#addCol Col++

		div#page-sidebar
			
		
		script
			var set_doc = function(data){
				orgnzit.doc = data;
				orgnzit.UI.init(function(){
				
					for(var i = 0; i < data.rows.length; i++){
						var row = data.rows[i];
						for(var j = 0; j < row.cells.length; j++){
							var cell = row.cells[j];
							orgnzit.UI.unlock(cell);
						}
					}
					for(var i = 0; i < data.cols.length; i++){
						var col = data.cols[i];
						orgnzit.UI.unlock(col);
					}
					
					$("#addRow").click(function(){
						orgnzit.socket.emit('insert_row');
					});
					$("#addCol").click(function(){
						orgnzit.socket.emit('insert_col');
					});
					
				});
			}
			$.ajax({
				type:"GET",
				url: "/doc/#{id}/json",
				success: set_doc
			});
